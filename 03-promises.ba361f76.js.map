{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,QAASC,SAASC,cAAc,SAChCC,SAAUF,SAASC,cAAc,kBACjCE,QAASH,SAASC,cAAc,iBAChCG,UAAWJ,SAASC,cAAc,mBAClCI,OAAQL,SAASC,cAAc,oBAG3BK,EAAO,CACXC,gBAAiB,KACjBC,SAAU,GAsDZ,SAASC,EAAcD,EAAUE,GAC/B,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACLC,KAAKC,SAAW,GAGpCH,EAAQ,CAAEJ,WAAUE,UAGpBG,EAAO,CAAEL,WAAUE,aAYzB,SAASM,EAAUR,EAAUE,GAE3BO,EAAArB,GAASsB,OAAOC,QAAQ,uBAAwCC,OAAfZ,EAAS,QAAYY,OAANV,EAAM,OAGxE,SAASW,EAASb,EAAUE,GAC1BO,EAAArB,GAASsB,OAAOI,QAAQ,sBAAqCF,OAAfZ,EAAS,QAAYY,OAANV,EAAM,OA7ErEZ,EAAKO,OAAOkB,iBAAiB,SAAS,SAAAC,GACpCA,EAAGC,iBAQL,SAAsBC,GACpBC,MAAQC,OAAO9B,EAAKI,SAAS2B,OAE7BvB,EAAKC,gBAAkBuB,YAAW,WAChCrB,EAAcH,EAAKE,SAAUmB,OAC3BI,MAAK,SAAAC,GACLhB,EADgBgB,EAARxB,SAAewB,EAALtB,UAIlBuB,OAAM,SAAAD,GACNX,EADiBW,EAARxB,SAAewB,EAALtB,UAIrBJ,EAAKE,UAAY,EAEjBmB,OAASC,OAAO9B,EAAKK,QAAQ0B,OAE7BvB,EAAKC,gBAAkB2B,aAAY,WAEjC,GAAI5B,EAAKE,UAAYkB,EAYnB,OAXAjB,EAAcH,EAAKE,SAAUmB,OAC/BI,MAAK,SAAAC,GACLhB,EADgBgB,EAARxB,SAAewB,EAALtB,UAIlBuB,OAAM,SAAAD,GACNX,EADiBW,EAARxB,SAAewB,EAALtB,UAIjBiB,OAASC,OAAO9B,EAAKK,QAAQ0B,OAErBvB,EAAKE,UAAY,EAEzB2B,cAAc7B,EAAKC,iBACnBD,EAAKE,SAAW,EAEhB4B,QAAQC,IAAI/B,KAEbqB,SACFA,OA7CHW,CADeV,OAAO9B,EAAKM,UAAUyB,WA+DP/B,EAA3BC,QAAQwB,iBAAiB,SAAS,SAAAC,GACrClB,EAAKkB,EAAGe,OAAOC,MAAQZ,OAAOJ,EAAGe,OAAOV,OAExCM,cAAc7B,EAAKmC,mB","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  inpForm: document.querySelector('.form'),\n  inpDelay: document.querySelector('[name=\"delay\"]'),\n  inpStep: document.querySelector('[name=\"step\"]'),\n  inpAmount: document.querySelector('[name=\"amount\"]'),\n  btnSub: document.querySelector('[type=\"submit\"]'),\n};\n\nconst data = {\n  counterInterval: null,\n  position: 1,\n};\n\nrefs.btnSub.addEventListener('click', ev => {\n  ev.preventDefault();\n  const AMOUNT = Number(refs.inpAmount.value);\n  startPromise(AMOUNT);\n\n  \n\n});\n\nfunction startPromise(AMOUNT) {\n  DELAY = Number(refs.inpDelay.value);\n\n  data.counterInterval = setTimeout(() => {\n    createPromise(data.position, DELAY\n    ).then(({ position, delay }) => {\n      onSuccess(position, delay);\n    }\n      \n    ).catch(({ position, delay }) => {\n      onReject(position, delay);\n    });\n\n    data.position += 1;\n\n    DELAY += Number(refs.inpStep.value);\n\n    data.counterInterval = setInterval(() => {\n      \n      if (data.position <= AMOUNT) {\n        createPromise(data.position, DELAY\n    ).then(({ position, delay }) => {\n      onSuccess(position, delay);\n    }\n      \n    ).catch(({ position, delay }) => {\n      onReject(position, delay);\n    });\n\n        DELAY += Number(refs.inpStep.value);\n\n        return (data.position += 1);\n      } else {\n        clearInterval(data.counterInterval);\n        data.position = 1;\n        \n        console.log(data)\n      }\n    }, DELAY);\n  }, DELAY);\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      // Fulfill\n      resolve({ position, delay });\n    } else { \n      // Reject\n      reject({ position, delay });\n    }\n  });\n}\n\n// Считывание введенных данных и запись\nrefs.inpForm.addEventListener('input', ev => {\n  data[ev.target.name] = Number(ev.target.value);\n\n  clearInterval(data.counterTimeout);\n});\n\nfunction onSuccess(position, delay) {\n\n  Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n}\n\nfunction onReject(position, delay) {\n  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`)\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$refs","inpForm","document","querySelector","inpDelay","inpStep","inpAmount","btnSub","$ce04d3a99e08e73b$var$data","counterInterval","position","$ce04d3a99e08e73b$var$createPromise","delay","Promise","resolve","reject","Math","random","$ce04d3a99e08e73b$var$onSuccess","$parcel$interopDefault","Notify","success","concat","$ce04d3a99e08e73b$var$onReject","failure","addEventListener","ev","preventDefault","AMOUNT","DELAY","Number","value","setTimeout","then","param","catch","setInterval","clearInterval","console","log","$ce04d3a99e08e73b$var$startPromise","target","name","counterTimeout"],"version":3,"file":"03-promises.ba361f76.js.map"}